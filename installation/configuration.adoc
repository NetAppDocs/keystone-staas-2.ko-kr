---
sidebar: sidebar 
permalink: installation/configuration.html 
keywords: configuration keystone collector 
summary: Keystone Collector가 스토리지 환경에서 사용 데이터를 수집할 수 있도록 구성을 완료했습니다. 
---
= Keystone Collector 구성
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Keystone Collector가 스토리지 환경에서 사용 데이터를 수집할 수 있도록 하려면 몇 가지 구성 작업을 완료해야 합니다.  이는 필요한 구성 요소를 활성화하고 스토리지 환경과 연결하기 위한 일회성 활동입니다.

[NOTE]
====
* Keystone Collector는 구성 및 모니터링 활동을 수행하기 위한 Keystone Collector 관리 터미널 사용자 인터페이스(TUI) 유틸리티를 제공합니다.  Enter 키와 화살표 키 등 다양한 키보드 컨트롤을 사용하여 옵션을 선택하고 이 TUI를 탐색할 수 있습니다.
* Keystone Collector는 인터넷 접속이 불가능한 조직, 즉 _다크 사이트_ 또는 _프라이빗 모드_에 맞게 구성할 수 있습니다.  자세한 내용은 다음을 참조하세요.link:../dark-sites/overview.html["개인 모드의 Keystone"] .


====
.단계
. Keystone Collector 관리 TUI 유틸리티를 시작합니다.
`$ keystone-collector-tui`
. **구성 > KS-Collector**로 이동하여 Keystone Collector 구성 화면을 열고 업데이트에 사용할 수 있는 옵션을 확인하세요.
. 필요한 옵션을 업데이트합니다.
+
.<strong> ONTAP 용</strong>
[%collapsible]
====
** * ONTAP 사용량 수집*: 이 옵션을 사용하면 ONTAP 에 대한 사용 데이터를 수집할 수 있습니다.  Active IQ Unified Manager (Unified Manager) 서버 및 서비스 계정의 세부 정보를 추가합니다.
** * ONTAP 성능 데이터 수집*: 이 옵션을 사용하면 ONTAP 에 대한 성능 데이터를 수집할 수 있습니다.  이 기능은 기본적으로 비활성화되어 있습니다.  SLA 목적으로 환경에서 성능 모니터링이 필요한 경우 이 옵션을 활성화합니다.  Unified Manager Database 사용자 계정 세부 정보를 제공합니다.  데이터베이스 사용자 생성에 대한 정보는 다음을 참조하세요.link:../installation/addl-req.html["Unified Manager 사용자 만들기"] .
** *개인 정보 삭제*: 이 옵션은 고객의 특정 개인 정보를 삭제하며 기본적으로 활성화되어 있습니다.  이 옵션이 활성화된 경우 메트릭에서 제외되는 데이터에 대한 자세한 내용은 다음을 참조하세요.link:../installation/configuration.html#limit-collection-of-private-data["개인정보 수집 제한"] .


====
+
.<strong> StorageGRID 용</strong>
[%collapsible]
====
** * StorageGRID 사용량 수집*: 이 옵션을 사용하면 노드 사용 세부 정보를 수집할 수 있습니다.  StorageGRID 노드 주소와 사용자 세부 정보를 추가합니다.
** *개인 정보 삭제*: 이 옵션은 고객의 특정 개인 정보를 삭제하며 기본적으로 활성화되어 있습니다.  이 옵션이 활성화된 경우 메트릭에서 제외되는 데이터에 대한 자세한 내용은 다음을 참조하세요.link:../installation/configuration.html#limit-collection-of-private-data["개인정보 수집 제한"] .


====
. **시스템으로 KS-Collector 시작** 필드를 전환합니다.
. **저장**을 클릭합니다.image:tui-1.png["투이 스크린"]
. TUI의 메인 화면으로 돌아가서 **서비스 상태** 정보를 확인하여 Keystone Collector가 정상 상태인지 확인하세요.  시스템은 서비스가 **전반적으로: 양호** 상태임을 표시해야 합니다.image:tui-2.png["투이 스크린"]
. 홈 화면에서 **셸로 종료** 옵션을 선택하여 Keystone Collector 관리 TUI를 종료합니다.




== Keystone Collector에서 HTTP 프록시 구성

Collector 소프트웨어는 HTTP 프록시를 사용하여 인터넷과 통신하는 것을 지원합니다.  이는 TUI에서 구성할 수 있습니다.

.단계
. 이미 닫혀 있는 Keystone Collector 관리 TUI 유틸리티를 다시 시작합니다.
`$ keystone-collector-tui`
. **HTTP 프록시** 필드를 켜고 인증이 필요한 경우 HTTP 프록시 서버, 포트 및 자격 증명에 대한 세부 정보를 추가합니다.
. **저장**을 클릭합니다.image:tui-3.png["투이 스크린"]




== 개인정보 수집 제한

Keystone Collector는 구독 측정을 수행하는 데 필요한 제한된 구성, 상태 및 성능 정보를 수집합니다.  업로드된 콘텐츠에서 민감한 정보를 마스킹하여 수집되는 정보를 더욱 제한하는 옵션이 있습니다.  이는 청구 계산에 영향을 미치지 않습니다.  그러나 정보를 제한하면 사용자가 쉽게 식별할 수 있는 볼륨 이름 등의 일부 요소가 UUID로 대체되므로 보고 정보의 유용성에 영향을 줄 수 있습니다.

특정 고객 데이터 수집을 제한하는 것은 Keystone Collector TUI 화면에서 구성 가능한 옵션입니다.  이 옵션인 *개인 데이터 제거*는 기본적으로 활성화되어 있습니다.

image:tui-4.png["투이 스크린"]

ONTAP 및 StorageGRID 에서 개인 데이터 액세스 제한에 대해 제거된 항목에 대한 정보는 다음을 참조하세요.link:../installation/data-collection.html["개인 데이터 접근 제한에서 제거된 항목 목록"] .



== 사용자 정의 루트 CA 신뢰

공개 루트 인증 기관(CA)에 대한 인증서 검증은 Keystone Collector 보안 기능의 일부입니다.  하지만 필요한 경우 Keystone Collector를 구성하여 사용자 정의 루트 CA를 신뢰하도록 할 수 있습니다.

시스템 방화벽에서 SSL/TLS 검사를 사용하면 인터넷 기반 트래픽이 사용자 지정 CA 인증서로 다시 암호화됩니다.  루트 인증서를 수락하고 연결을 허용하기 전에 출처를 신뢰할 수 있는 CA로 검증하도록 설정을 구성해야 합니다.  다음 단계를 따르세요.

.단계
. CA 인증서를 준비합니다.  _base64로 인코딩된 X.509_ 파일 형식이어야 합니다.
+

NOTE: 지원되는 파일 확장자는 다음과 같습니다. `.pem` , `.crt` , `.cert` .  인증서가 다음 형식 중 하나인지 확인하세요.

. 인증서를 Keystone Collector 서버로 복사합니다.  파일이 복사된 위치를 기록해 두세요.
. 서버에서 터미널을 열고 관리 TUI 유틸리티를 실행합니다.
`$ keystone-collector-tui`
. *구성 > 고급*으로 이동합니다.
. *사용자 정의 루트 인증서 사용* 옵션을 활성화합니다.
. *사용자 지정 루트 인증서 경로 선택:*에서 다음을 선택하세요. `- Unset -`
. Enter 키를 누르세요.  인증서 경로를 선택하기 위한 대화 상자가 표시됩니다.
. 파일 시스템 브라우저에서 루트 인증서를 선택하거나 정확한 경로를 입력하세요.
. Enter 키를 누르세요.  *고급* 화면으로 돌아갑니다.
. *저장*을 선택하세요.  구성이 적용됩니다.


image:kc-custom-ca.png["CA 사용자 정의를 위한 TUI 화면"]



== 성능 서비스 수준 생성

Keystone Collector 관리 TUI 유틸리티를 사용하여 성능 서비스 수준(PSL)을 생성할 수 있습니다. TUI를 통해 PSL을 생성하면 각 성능 서비스 수준에 설정된 기본값이 자동으로 선택되므로 Active IQ Unified Manager 통해 PSL을 생성하는 동안 이러한 값을 수동으로 설정할 때 발생할 수 있는 오류 가능성이 줄어듭니다.

PSL에 대해 자세히 알아보려면 다음을 참조하세요.link:https://docs.netapp.com/us-en/active-iq-unified-manager/storage-mgmt/concept_manage_performance_service_levels.html["성능 서비스 수준"^] .

서비스 수준에 대해 자세히 알아보려면 다음을 참조하세요.link:https://docs.netapp.com/us-en/keystone-staas/concepts/service-levels.html#service-levels-for-file-and-block-storage["Keystone 의 서비스 수준"^] .

.단계
. Keystone Collector 관리 TUI 유틸리티를 시작합니다.
`$ keystone-collector-tui`
. *구성>AIQUM*으로 가서 AIQUM 화면을 엽니다.
. *AIQUM 성능 프로필 만들기* 옵션을 활성화합니다.
. Active IQ Unified Manager 서버와 사용자 계정의 세부 정보를 입력하세요.  이러한 세부정보는 PSL을 생성하는 데 필요하며 저장되지 않습니다.
+
image:qos-account-details-1.png["AIQUM 서버 및 서비스 계정의 세부 정보를 입력하는 TUI 화면"]

. * Keystone 버전 선택*을 선택하려면 `-unset-` .
. Enter 키를 누르세요.  Keystone 버전을 선택하는 대화 상자가 표시됩니다.
. Keystone STaaS에 대한 Keystone 버전을 지정하려면 *STaaS*를 강조 표시한 다음 Enter를 누릅니다.
+
image:qos-STaaS-selection-2.png["Keystone 버전을 지정하기 위한 TUI 화면"]

+

NOTE: Keystone 구독 서비스 버전 1의 *KFS* 옵션을 강조 표시할 수 있습니다. Keystone 구독 서비스는 구성 성능 서비스 수준, 서비스 제공, 청구 원칙 측면에서 Keystone STaaS와 다릅니다. 자세한 내용은 다음을 참조하세요.link:https://docs.netapp.com/us-en/keystone-staas/subscription-services-v1.html["Keystone 구독 서비스 | 버전 1"^] .

. 지원되는 모든 Keystone 성능 서비스 수준은 지정된 Keystone 버전의 * Keystone 서비스 수준 선택* 옵션에 표시됩니다.  목록에서 원하는 성능 서비스 수준을 활성화합니다.
+
image:qos-STaaS-selection-3.png["지원되는 모든 Keystone 서비스 수준을 표시하는 TUI 화면"]

+

NOTE: 여러 성과 서비스 수준을 동시에 선택하여 PSL을 생성할 수 있습니다.

. *저장*을 선택하고 Enter를 누르세요.  성과 서비스 수준이 생성됩니다.
+
Active IQ Unified Manager 의 *성능 서비스 수준* 페이지에서 Premium-KS-STaaS(STaaS용) 또는 Extreme KFS(KFS용)와 같이 생성된 PSL을 볼 수 있습니다.  생성된 PSL이 요구 사항을 충족하지 못하는 경우, PSL을 수정하여 요구 사항을 충족할 수 있습니다.  자세한 내용은 다음을 참조하세요.link:https://docs.netapp.com/us-en/active-iq-unified-manager/storage-mgmt/task_create_and_edit_psls.html["성능 서비스 수준 생성 및 편집"^] .

+
image:qos-performance-sl.png["생성된 AQoS 정책을 표시하는 UI 스크린샷"]




TIP: 선택한 성능 서비스 수준에 대한 PSL이 지정된 Active IQ Unified Manger 서버에 이미 있는 경우 다시 생성할 수 없습니다. 이를 시도하면 오류 메시지가 표시됩니다.image:qos-failed-policy-1.png["정책 생성에 대한 오류 메시지를 표시하는 TUI 화면"]
